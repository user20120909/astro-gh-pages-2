---
import weather from '../../public/weather.json';
import Paragraph from './Paragraph.astro';

interface Props {
  length?: number;
}

const { length } = Astro.props;

export const getIcon = (img: string) => {
  switch (img) {
    case '01d':
      return 'â˜€ï¸';
    case '02d':
      return 'â›…';
    case '03d':
      return 'ðŸŒ¥ï¸';
    case '04d':
      return 'â˜ï¸';
    case '09d':
      return 'ðŸŒ§ï¸';
    case '10d':
      return 'ðŸŒ¦ï¸';
    case '11d':
      return 'â›ˆï¸';
    case '13d':
      return 'â„ï¸';
    case '50d':
      return 'ðŸŒ«ï¸';
    default:
      return 'ðŸ’¥';
  }
};
---

{
  weather.data.slice(0, length).map((item, i) => (
    <div class="w-full">
      <table class="w-full table-fixed">
        <tbody class="w-full">
          <tr class={`w-full ${i % 2 === 1 ? 'bg-gray-50' : ''} h-20`}>
            <td class="w-1/3 px-2 py-2">
              <b>{item.city}</b>
            </td>
            <td class="px-2 py-2">
              {item.ignore ? (
                '-'
              ) : (
                <div>
                  <b>{item.maxTemp}Â°</b>
                  <br />
                  {item.minTemp}Â°
                </div>
              )}
            </td>
            <td class="px-2 py-2 text-center">
              {getIcon(item.ignore ? 'destroyed' : item.icon)}
            </td>
            <td class="w-1/2 px-2 py-2">
              {item.ignore ? (
                <span>
                  {item.city} is <b>vernietigd</b>
                </span>
              ) : (
                <span set:html={item.desc} />
              )}
            </td>
          </tr>
          {i % 10 === 9 && i % 20 !== 9 && <Paragraph ad="shop-img" />}
          {i % 20 === 9 && <Paragraph ad="shop" />}
        </tbody>
      </table>
    </div>
  ))
}
